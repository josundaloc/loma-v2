{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"/Users/joseph/Code/lomav2/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/joseph/Code/lomav2/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/joseph/Code/lomav2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/joseph/Code/lomav2/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/joseph/Code/lomav2/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/joseph/Code/lomav2/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/joseph/Code/lomav2/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/joseph/Code/lomav2/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import\"tailwindcss/tailwind.css\";import{SearchBar}from'./Components/SearchBar';import{Results}from'./Components/Results';import{Landing}from'./Components/Landing';import{LoadingPop}from'./Components/LoadingPop';import{PopUpListing}from'./Components/PopUpListing';import imagePlaceholder from'./assets/gallery.png';import{hotjar}from'react-hotjar';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={Data:[],AccessToken:\"none\",ExpiryDate:0,resultsDisplay:\"âš¡ï¸ Trending âš¡ï¸\",searchTerm:\"\",loading:false,landing:true,popUpListing:{display:false,listing:{}},depopData:{data:[{nothing:\"none\"}],status:'unresolved'},gumtreeData:{data:[{nothing:\"none\"}],status:'unresolved'},facebookData:{data:[{nothing:\"none\"}],status:'unresolved'}};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.setData=_this.setData.bind(_assertThisInitialized(_this));_this.toggleDisplay=_this.toggleDisplay.bind(_assertThisInitialized(_this));_this.reOrderDisplay=_this.reOrderDisplay.bind(_assertThisInitialized(_this));_this.togglePopUp=_this.togglePopUp.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var appLoaded=Date.now();var getEbayAccessToken=function getEbayAccessToken(){if(Date.now()>_this2.state.ExpiryDate){console.log(\"this app does not have an access token, getting access token\");var myHeaders=new Headers();myHeaders.append(\"Authorization\",\"Basic Sm9zZXBoVW4tTG9tYS1QUkQtMTk5YWQwZDkwLWY0Y2QyYjg4OlBSRC05OWFkMGQ5MDRiYjEtZjYzMS00OGMyLTkwNTQtYTQ5Yg==\");myHeaders.append(\"Content-Type\",\"application/x-www-form-urlencoded\");myHeaders.append(\"Cookie\",\"ebay=%5Esbf%3D%23%5E; dp1=bu1p/QEBfX0BAX19AQA**6379634c^\");var urlencoded=new URLSearchParams();urlencoded.append(\"grant_type\",\"client_credentials\");urlencoded.append(\"scope\",\"https://api.ebay.com/oauth/api_scope\");var requestOptions={method:'POST',headers:myHeaders,body:urlencoded,redirect:'follow'};fetch(\"https://loma-cors.herokuapp.com/https://api.ebay.com/identity/v1/oauth2/token\",requestOptions).then(function(response){return response.json();}).then(function(jsonresponse){_this2.setState({AccessToken:jsonresponse.access_token,ExpiryDate:Date.now()+jsonresponse.expires_in*1000});var accessTokenSet=Date.now()-appLoaded;console.log(\"apiAccessToken = \".concat(_this2.state.AccessToken,\", took \").concat(accessTokenSet,\" milliseconds\"));}).catch(function(error){return console.log('error',error);});}};///////DATA CLEANERS\nvar isNull=function isNull(property){if(property===null||property===undefined){return\" \";}else{return property;}};var facebookPriceParsed=function facebookPriceParsed(price){var rawPrice=price.substring(1);if(!price||price===\"FREE\"){return\"0\";}else if(price===\"See listings near me\"){return\"~\";}else if(!rawPrice.includes(\"Â£\")){return rawPrice;}else if(rawPrice.includes(\"Â£\")){return rawPrice.substring(0,rawPrice.indexOf(\"Â£\"));}};var isPriceNull=function isPriceNull(price){if(price===undefined||price===null){return\"~\";}else{return price.substring(1);}};var missingImagesFiltered=function missingImagesFiltered(imageProp){if(imageProp===null||imageProp===undefined){return imagePlaceholder;}else{return imageProp;}};//\nvar getDepopData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var depop_url,depopResponse,depopData,depopDataParsed,depopDataSetTime;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"getting depop data\");depop_url=\"https://api.apify.com/v2/datasets/ml97NZifdmN1EFUSb/items?clean=true&format=json\";_context.next=4;return fetch(depop_url);case 4:depopResponse=_context.sent;_context.next=7;return depopResponse.json();case 7:depopData=_context.sent;_context.next=10;return depopData.map(function(listing){return{title:isNull(listing.title),price:isPriceNull(listing.price),description:isNull(listing.description),image:isNull(missingImagesFiltered(listing.image)),url:isNull(listing.url),site:\"depop\"};});case 10:depopDataParsed=_context.sent;_this2.setState({depopData:{data:depopDataParsed,status:'resolved'}});depopDataSetTime=Date.now()-appLoaded;console.log(\"depop data has been set, it took this many milliseconds: \"+depopDataSetTime);case 14:case\"end\":return _context.stop();}}},_callee);}));return function getDepopData(){return _ref.apply(this,arguments);};}();///\nvar getGumtreeData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var gumtree_url,gumtreeResponse,gumtreeData,gumtreeDataParsed,gumtreeDataSetTime;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"getting gumtree data\");gumtree_url=\"https://api.apify.com/v2/datasets/Dh5XzAb9fvidWw285/items?format=json&clean=1\";_context2.next=4;return fetch(gumtree_url);case 4:gumtreeResponse=_context2.sent;_context2.next=7;return gumtreeResponse.json();case 7:gumtreeData=_context2.sent;_context2.next=10;return gumtreeData.map(function(listing){return{title:listing.title,price:listing.price.substring(1),description:listing.description,image:missingImagesFiltered(listing.image),url:listing.url,site:\"gumtree\"};});case 10:gumtreeDataParsed=_context2.sent;_this2.setState({gumtreeData:{data:gumtreeDataParsed,status:'resolved'}});gumtreeDataSetTime=Date.now()-appLoaded;console.log(\"gumtree data has been set, it took this many milliseconds: \"+gumtreeDataSetTime);case 14:case\"end\":return _context2.stop();}}},_callee2);}));return function getGumtreeData(){return _ref2.apply(this,arguments);};}();///\nvar getFacebookData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var facebook_url,facebookResponse,facebookData,facebookDataParsed,facebookDataSetTime;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(\"getting facebook data\");facebook_url=\"https://api.apify.com/v2/datasets/IitkxYE95yydtzFlk/items?clean=true&format=json\";_context3.next=4;return fetch(facebook_url);case 4:facebookResponse=_context3.sent;_context3.next=7;return facebookResponse.json();case 7:facebookData=_context3.sent;facebookDataParsed=facebookData.map(function(listing){return{title:\"\"+isNull(listing.title),price:\"\"+facebookPriceParsed(listing.price),description:\"\"+isNull(listing.description),image:\"\"+missingImagesFiltered(listing.image),url:\"\"+isNull(listing.url),site:\"facebook\"};});_this2.setState({facebookData:{data:facebookDataParsed,status:'resolved'}});facebookDataSetTime=Date.now()-appLoaded;console.log(\"facebook data has been set, it took this many milliseconds: \"+facebookDataSetTime);case 12:case\"end\":return _context3.stop();}}},_callee3);}));return function getFacebookData(){return _ref3.apply(this,arguments);};}();///////\ngetEbayAccessToken();getDepopData();getGumtreeData();getFacebookData();hotjar.initialize(2123002,6);console.log(\"access token\"+this.state.AccessToken);}//COMPONENT MOUNT ENDS\n},{key:\"toggleLanding\",value:function toggleLanding(){this.setState({landing:true});}},{key:\"toggleDisplay\",value:function toggleDisplay(sortOrder){this.setState({resultsDisplay:sortOrder});console.log(sortOrder);console.log(\"the display mode is now\"+this.state.resultsDisplay);this.reOrderDisplay();}},{key:\"reOrderDisplay\",value:function reOrderDisplay(){/// functions\nfunction shuffleArray(array){for(var i=array.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var temp=array[i];array[i]=array[j];array[j]=temp;}return array;}function lowest(a,b){if(Number(a.price)<Number(b.price)){return 1;}if(Number(a.price)>Number(b.price)){return-1;}return 0;}function highest(a,b){if(Number(a.price)<Number(b.price)){return-1;}if(Number(a.price)>Number(b.price)){return 1;}return 0;}if(this.state.Data){if(this.state.resultsDisplay===\"âš¡ï¸ Trending âš¡ï¸\"){this.setState({Data:shuffleArray(this.state.Data)});}else if(this.state.resultsDisplay===\"Highest price first â–²\"){this.setState({Data:this.state.Data.sort(highest)});}else if(this.state.resultsDisplay===\"Lowest price first â–¼\"){this.setState({Data:this.state.Data.sort(lowest)});}else{this.setState({});}}}},{key:\"setData\",value:function(){var _setData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(searchQuery){var _this3=this;var myHeaders,urlencoded,requestOptions,isNull,isPriceNull,ebayPriceParsed,facebookPriceParsed,missingImagesFiltered,tnmissingImagesFiltered,eBayMissingImagesFiltered,ebayHeaders,ebayrequestOptions,ebayresponse,jsonresponse,ebayDataParsed,depop_url,depopResponse,depopData,depopDataFiltered,depopDataParsed,_depopDataFiltered,gumtree_url,gumtreeResponse,gumtreeData,gumtreeDataFiltered,gumtreeDataParsed,_gumtreeDataFiltered,facebook_url,facebookResponse,facebookData,facebookDataFiltered,facebookDataParsed,_facebookDataFiltered,etsyRaw,etsyJson,etsyDataResults,etsyData,trashnothingRaw,tnJson,tnResults,trashNothingData,highest,lowest,shuffleArray;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:shuffleArray=function _shuffleArray(array){for(var i=array.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var temp=array[i];array[i]=array[j];array[j]=temp;}return array;};lowest=function _lowest(a,b){if(Number(a.price)<Number(b.price)){return-1;}if(Number(a.price)>Number(b.price)){return 1;}return 0;};highest=function _highest(a,b){if(Number(a.price)<Number(b.price)){return 1;}if(Number(a.price)>Number(b.price)){return-1;}return 0;};if(searchQuery){_context4.next=6;break;}alert(\"Tell me what to search! ðŸ˜\");return _context4.abrupt(\"return\");case 6:console.time(\"complete search\");this.setState({searchTerm:searchQuery.toLowerCase(),loading:true,landing:false});if(Date.now()>this.state.ExpiryDate){console.log(\"this app does not have an access token! Getting access token\");myHeaders=new Headers();myHeaders.append(\"Authorization\",\"Basic Sm9zZXBoVW4tTG9tYS1QUkQtMTk5YWQwZDkwLWY0Y2QyYjg4OlBSRC05OWFkMGQ5MDRiYjEtZjYzMS00OGMyLTkwNTQtYTQ5Yg==\");myHeaders.append(\"Content-Type\",\"application/x-www-form-urlencoded\");myHeaders.append(\"Cookie\",\"ebay=%5Esbf%3D%23%5E; dp1=bu1p/QEBfX0BAX19AQA**6379634c^\");urlencoded=new URLSearchParams();urlencoded.append(\"grant_type\",\"client_credentials\");urlencoded.append(\"scope\",\"https://api.ebay.com/oauth/api_scope\");requestOptions={method:'POST',headers:myHeaders,body:urlencoded,redirect:'follow'};fetch(\"https://loma-cors.herokuapp.com/https://api.ebay.com/identity/v1/oauth2/token\",requestOptions).then(function(response){return response.json();}).then(function(jsonresponse){_this3.setState({AccessToken:jsonresponse.access_token,ExpiryDate:new Date().getTime()+jsonresponse.expires_in*1000});}).catch(function(error){return console.log('error',error);});}else{console.log(\"this has an access token\"+this.state.AccessToken.substring(10,25));}// console.log(\"access token\" + this.state.AccessToken);\n// let formattedExpiryDate = this.state.ExpiryDate * 1000;\n//console.log(formattedExpiryDate.toUTCString())\n/////////////////////DATA CLEANERS///////////////////////////\nisNull=function isNull(property){if(property===null||property===undefined){return\" \";}else{return property;}};isPriceNull=function isPriceNull(price){if(price===undefined||price===null){return\"~\";}else{return price.substring(1);}};ebayPriceParsed=function ebayPriceParsed(listing){if(listing.price.currency===\"USD\"){return listing.price.convertedFromValue?listing.price.convertedFromValue:listing.price.value;}else{return listing.price.value;}};facebookPriceParsed=function facebookPriceParsed(price){var rawPrice=price.substring(1);if(!price||price===\"FREE\"){return\"0\";}else if(price===\"See listings near me\"){return\"~\";}else if(!rawPrice.includes(\"Â£\")){return rawPrice;}else if(rawPrice.includes(\"Â£\")){return rawPrice.substring(0,rawPrice.indexOf(\"Â£\"));}};missingImagesFiltered=function missingImagesFiltered(imageProp){if(imageProp===null||imageProp===undefined){return imagePlaceholder;}else{return imageProp;}};tnmissingImagesFiltered=function tnmissingImagesFiltered(listing){if(!listing.photos){return imagePlaceholder;}else{return listing.photos[0].url;}};eBayMissingImagesFiltered=function eBayMissingImagesFiltered(listing){if(!listing.hasOwnProperty(\"image\")||!listing.image.hasOwnProperty(\"imageUrl\")){return imagePlaceholder;}else{return listing.thumbnailImages[0].imageUrl;}};/////END OF CLEANER FUNCTIONS\n/////GET EBAY DATA\nebayHeaders=new Headers();ebayHeaders.append(\"Authorization\",\"Bearer \".concat(this.state.AccessToken));ebayHeaders.append(\"Content-Type\",\"application/json\");ebayHeaders.append(\"X-EBAY-C-MARKETPLACE-ID\",\"EBAY_US\");ebayHeaders.append(\"X-EBAY-C-ENDUSERCTX\",\"affiliateCampaignId=<ePNCampaignId>,affiliateReferenceId=<referenceId>\");ebayrequestOptions={method:'GET',headers:ebayHeaders,redirect:'follow'};_context4.next=24;return fetch(\"https://loma-cors.herokuapp.com/https://api.ebay.com/buy/browse/v1/item_summary/search?q=\".concat(searchQuery,\"&limit=200&filter=conditions:{UNSPECIFIED|USED},itemLocationCountry:GB&fieldgroups=EXTENDED\"),ebayrequestOptions);case 24:ebayresponse=_context4.sent;_context4.next=27;return ebayresponse.json();case 27:jsonresponse=_context4.sent;ebayDataParsed=function ebayDataParsed(){if(jsonresponse.itemSummaries){return jsonresponse.itemSummaries.map(function(listing){return{title:isNull(listing.title),description:isNull(listing.shortDescription),price:isNull(ebayPriceParsed(listing)),image:eBayMissingImagesFiltered(listing),url:isNull(listing.itemWebUrl),site:\"ebay\"};});}else{return[];}};this.setState(function(prevState){return{Data:[].concat(_toConsumableArray(prevState.Data),_toConsumableArray(ebayDataParsed()))};});/////////////GET DEPOP DATA\nif(!(this.state.depopData.status===\"unresolved\")){_context4.next=44;break;}depop_url=\"https://api.apify.com/v2/datasets/ml97NZifdmN1EFUSb/items?clean=true&format=json\";_context4.next=34;return fetch(depop_url);case 34:depopResponse=_context4.sent;_context4.next=37;return depopResponse.json();case 37:depopData=_context4.sent;depopDataFiltered=depopData.filter(function(listing){if(isNull(listing.title).toLowerCase().includes(_this3.state.searchTerm)){return true;}else if(isNull(listing.description).toLowerCase().includes(_this3.state.searchTerm)){return true;}else{return false;}});// || isNull(listing.description).includes(this.state.searchTerm));\ndepopDataParsed=depopDataFiltered.map(function(listing){return{title:isNull(listing.title),price:isPriceNull(listing.price),description:isNull(listing.description),image:isNull(missingImagesFiltered(listing.image)),url:isNull(listing.url),site:\"depop\"};});this.setState({depopData:{data:depopDataParsed,status:'resolved'}});this.setState(function(prevState){return{Data:[].concat(_toConsumableArray(prevState.Data),_toConsumableArray(depopDataParsed))};});_context4.next=45;break;case 44:if(this.state.depopData.status===\"resolved\"){_depopDataFiltered=this.state.depopData.data.filter(function(listing){if(isNull(listing.title).toLowerCase().includes(_this3.state.searchTerm)){return true;}else if(isNull(listing.description).toLowerCase().includes(_this3.state.searchTerm)){return true;}else{return false;}});this.setState(function(prevState){return{Data:[].concat(_toConsumableArray(prevState.Data),_toConsumableArray(_depopDataFiltered))};});}case 45:if(!(this.state.gumtreeData.status===\"unresolved\")){_context4.next=59;break;}gumtree_url=\"https://api.apify.com/v2/datasets/Dh5XzAb9fvidWw285/items?format=json&clean=1\";_context4.next=49;return fetch(gumtree_url);case 49:gumtreeResponse=_context4.sent;_context4.next=52;return gumtreeResponse.json();case 52:gumtreeData=_context4.sent;gumtreeDataFiltered=gumtreeData.filter(function(listing){return listing.title.toLowerCase().includes(_this3.state.searchTerm)||listing.description.toLowerCase().includes(_this3.state.searchTerm);});gumtreeDataParsed=gumtreeDataFiltered.map(function(listing){return{title:listing.title,price:listing.price.substring(1),description:listing.description,image:missingImagesFiltered(listing.image),url:listing.url,site:\"gumtree\"};});this.setState({depopData:{data:gumtreeDataParsed,status:'resolved'}});this.setState(function(prevState){return{Data:[].concat(_toConsumableArray(prevState.Data),_toConsumableArray(gumtreeDataParsed))};});_context4.next=61;break;case 59:_gumtreeDataFiltered=this.state.gumtreeData.data.filter(function(listing){if(isNull(listing.title).toLowerCase().includes(_this3.state.searchTerm)){return true;}else if(isNull(listing.description).toLowerCase().includes(_this3.state.searchTerm)){return true;}else{return false;}});this.setState(function(prevState){return{Data:[].concat(_toConsumableArray(prevState.Data),_toConsumableArray(_gumtreeDataFiltered))};});case 61:if(!(this.state.facebookData.status===\"unresolved\")){_context4.next=75;break;}facebook_url=\"https://api.apify.com/v2/datasets/IitkxYE95yydtzFlk/items?clean=true&format=json\";_context4.next=65;return fetch(facebook_url);case 65:facebookResponse=_context4.sent;_context4.next=68;return facebookResponse.json();case 68:facebookData=_context4.sent;facebookDataFiltered=facebookData.filter(function(listing){return listing.title.toLowerCase().includes(searchQuery||listing.description.toLowerCase().includes(searchQuery));});facebookDataParsed=facebookDataFiltered.map(function(listing){return{title:\"\"+isNull(listing.title),price:\"\"+facebookPriceParsed(listing.price),description:\"\"+isNull(listing.description),image:\"\"+missingImagesFiltered(listing.image),url:\"\"+isNull(listing.url),site:\"facebook\"};});this.setState({facebookData:{data:facebookDataParsed,status:'resolved'}});this.setState(function(prevState){return{Data:[].concat(_toConsumableArray(prevState.Data),_toConsumableArray(facebookDataParsed))};});_context4.next=77;break;case 75:_facebookDataFiltered=this.state.facebookData.data.filter(function(listing){if(isNull(listing.title).toLowerCase().includes(_this3.state.searchTerm)){return true;}else if(isNull(listing.description).toLowerCase().includes(_this3.state.searchTerm)){return true;}else{return false;}});this.setState(function(prevState){return{Data:[].concat(_toConsumableArray(prevState.Data),_toConsumableArray(_facebookDataFiltered))};});case 77:_context4.next=79;return fetch(\"https://loma-cors.herokuapp.com/https://openapi.etsy.com/v2/listings/active?keywords=\".concat(searchQuery,\"&tags=vintage&limit=200&region=GB&api_key=sh1n3isgj6bax7eotlor7m4s&includes=Images\"));case 79:etsyRaw=_context4.sent;_context4.next=82;return etsyRaw.json();case 82:etsyJson=_context4.sent;etsyDataResults=etsyJson.results;etsyData=etsyDataResults.map(function(listing){return{title:listing.title,price:listing.price,description:listing.description,image:missingImagesFiltered(listing.Images[0].url_570xN),url:listing.url,site:\"etsy\"};});this.setState(function(prevState){return{Data:[].concat(_toConsumableArray(prevState.Data),_toConsumableArray(etsyData))};});_context4.next=88;return fetch(\"https://trashnothing.com/api/v1.2/posts/search?search=\".concat(searchQuery,\"&sort_by=relevance&types=offer&sources=trashnothing&per_page=50&page=4&device_pixel_ratio=1&latitude=51.507351&longitude=-0.127758&radius=200000&api_key=yr8sVaHEvbdkdunSFfPoDpqlwEjxIuqB3XhyFzx1\"));case 88:trashnothingRaw=_context4.sent;_context4.next=91;return trashnothingRaw.json();case 91:tnJson=_context4.sent;tnResults=tnJson.posts;trashNothingData=tnResults.map(function(listing){return{title:listing.title,price:0,description:listing.content,image:tnmissingImagesFiltered(listing),url:listing.url,site:\"trashnothing\"};});this.setState(function(prevState){return{Data:[].concat(_toConsumableArray(prevState.Data),_toConsumableArray(trashNothingData))};});this.state.resultsDisplay===\"âš¡ï¸ Trending âš¡ï¸\"?this.setState(function(prevState){return{Data:shuffleArray(prevState.Data),loading:false};}):this.state.resultsDisplay===\"Highest price first â–²\"?this.setState(function(prevState){return{Data:prevState.Data.sort(highest),loading:false};}):this.state.resultsDisplay===\"Lowest price first â–¼\"?this.setState(function(prevState){return{Data:prevState.Data.sort(lowest),loading:false};}):this.setState(function(prevState){return{Data:prevState.Data,loading:false};});console.timeEnd(\"complete search\");case 97:case\"end\":return _context4.stop();}}},_callee4,this);}));function setData(_x){return _setData.apply(this,arguments);}return setData;}()},{key:\"handleChange\",value:function handleChange(searchQuery){this.setState({searchTerm:searchQuery});this.setData(searchQuery);}},{key:\"togglePopUp\",value:function togglePopUp(listing){if(this.state.popUpListing.display===true){this.setState({popUpListing:{display:false,listing:{}}});}else{this.setState({popUpListing:{display:true,listing:listing}});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"App w-screen h-full bg-white\",children:[this.state.popUpListing.display?/*#__PURE__*/_jsx(PopUpListing,{display:this.state.popUpListing.display,listing:this.state.popUpListing.listing,togglePopUp:this.togglePopUp}):null,/*#__PURE__*/_jsx(SearchBar,{onChange:this.handleChange}),this.state.landing?/*#__PURE__*/_jsx(Landing,{}):null,this.state.loading?null:/*#__PURE__*/_jsx(Results,{Data:this.state.Data,resultsDisplay:this.state.resultsDisplay,toggleResults:this.toggleDisplay,searchTerm:this.state.searchTerm,search:this.handleChange,togglePopUp:this.togglePopUp}),this.state.loading?/*#__PURE__*/_jsx(LoadingPop,{}):/*#__PURE__*/_jsx(\"p\",{})]});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/joseph/Code/lomav2/src/App.js"],"names":["React","SearchBar","Results","Landing","LoadingPop","PopUpListing","imagePlaceholder","hotjar","App","props","state","Data","AccessToken","ExpiryDate","resultsDisplay","searchTerm","loading","landing","popUpListing","display","listing","depopData","data","nothing","status","gumtreeData","facebookData","handleChange","bind","setData","toggleDisplay","reOrderDisplay","togglePopUp","appLoaded","Date","now","getEbayAccessToken","console","log","myHeaders","Headers","append","urlencoded","URLSearchParams","requestOptions","method","headers","body","redirect","fetch","then","response","json","jsonresponse","setState","access_token","expires_in","accessTokenSet","catch","error","isNull","property","undefined","facebookPriceParsed","price","rawPrice","substring","includes","indexOf","isPriceNull","missingImagesFiltered","imageProp","getDepopData","depop_url","depopResponse","map","title","description","image","url","site","depopDataParsed","depopDataSetTime","getGumtreeData","gumtree_url","gumtreeResponse","gumtreeDataParsed","gumtreeDataSetTime","getFacebookData","facebook_url","facebookResponse","facebookDataParsed","facebookDataSetTime","initialize","sortOrder","shuffleArray","array","i","length","j","Math","floor","random","temp","lowest","a","b","Number","highest","sort","searchQuery","alert","time","toLowerCase","getTime","ebayPriceParsed","currency","convertedFromValue","value","tnmissingImagesFiltered","photos","eBayMissingImagesFiltered","hasOwnProperty","thumbnailImages","imageUrl","ebayHeaders","ebayrequestOptions","ebayresponse","ebayDataParsed","itemSummaries","shortDescription","itemWebUrl","prevState","depopDataFiltered","filter","gumtreeDataFiltered","facebookDataFiltered","etsyRaw","etsyJson","etsyDataResults","results","etsyData","Images","url_570xN","trashnothingRaw","tnJson","tnResults","posts","trashNothingData","content","timeEnd","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport \"tailwindcss/tailwind.css\"\n\nimport { SearchBar } from './Components/SearchBar';\nimport { Results } from './Components/Results';\nimport { Landing } from './Components/Landing';\nimport { LoadingPop } from './Components/LoadingPop';\nimport { PopUpListing } from './Components/PopUpListing';\n\n\nimport imagePlaceholder from './assets/gallery.png';\n\nimport { hotjar } from 'react-hotjar';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      Data: [],\n      AccessToken: \"none\",\n      ExpiryDate: 0,\n      resultsDisplay: \"âš¡ï¸ Trending âš¡ï¸\",\n      searchTerm: \"\",\n      loading: false,\n      landing: true,\n      popUpListing: {\n        display: false,\n        listing: {}\n      },\n      depopData: {\n        data: [{nothing : \"none\"}],\n        status: 'unresolved'\n      },\n      gumtreeData: {\n        data: [{nothing : \"none\"}],\n        status: 'unresolved'\n      },\n      facebookData: {\n        data: [{nothing : \"none\"}],\n        status: 'unresolved'\n      }\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.setData = this.setData.bind(this);\n    this.toggleDisplay = this.toggleDisplay.bind(this);\n    this.reOrderDisplay = this.reOrderDisplay.bind(this);\n    this.togglePopUp = this.togglePopUp.bind(this);\n  }\n\n  componentDidMount() {\n    const appLoaded = Date.now()\n    const getEbayAccessToken = () => {\n    if (Date.now() > this.state.ExpiryDate) {\n      console.log(\"this app does not have an access token, getting access token\")\n\n      var myHeaders = new Headers();\n      myHeaders.append(\"Authorization\", \"Basic Sm9zZXBoVW4tTG9tYS1QUkQtMTk5YWQwZDkwLWY0Y2QyYjg4OlBSRC05OWFkMGQ5MDRiYjEtZjYzMS00OGMyLTkwNTQtYTQ5Yg==\");\n      myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n      myHeaders.append(\"Cookie\", \"ebay=%5Esbf%3D%23%5E; dp1=bu1p/QEBfX0BAX19AQA**6379634c^\");\n      \n      var urlencoded = new URLSearchParams();\n      urlencoded.append(\"grant_type\", \"client_credentials\");\n      urlencoded.append(\"scope\", \"https://api.ebay.com/oauth/api_scope\");\n      \n      var requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: urlencoded,\n        redirect: 'follow'\n      };\n      \n      fetch(\"https://loma-cors.herokuapp.com/https://api.ebay.com/identity/v1/oauth2/token\", requestOptions)\n          .then(response => response.json())\n          .then(jsonresponse => {\n            this.setState({\n              AccessToken: jsonresponse.access_token,\n              ExpiryDate: Date.now() + jsonresponse.expires_in * 1000\n            })\n            let accessTokenSet = Date.now() - appLoaded;\n            console.log(`apiAccessToken = ${this.state.AccessToken}, took ${accessTokenSet} milliseconds`);\n          })\n          .catch(error => console.log('error', error));\n        } \n    }\n\n\n    ///////DATA CLEANERS\n    const isNull = (property) => {\n      if (property === null || property === undefined) {\n     return \" \";\n     } else {\n       return property;\n     }\n     };\n\n     const facebookPriceParsed = (price) => {\n      let rawPrice = price.substring(1);\n      if (!price || price === \"FREE\") {\n        return \"0\"\n      } else if (price === \"See listings near me\") {\n        return \"~\"\n      } else if (!rawPrice.includes(\"Â£\")){\n        return rawPrice;\n      } else if (rawPrice.includes(\"Â£\")) {\n        return rawPrice.substring(0, rawPrice.indexOf(\"Â£\"));\n      }\n    };\n     \n\n     const isPriceNull = (price) => {\n      if (price === undefined || price === null) {\n        return \"~\";\n      } else {\n        return price.substring(1)\n      }\n    };\n\n    const missingImagesFiltered = (imageProp) => {\n      if (imageProp === null || imageProp === undefined) {\n        return imagePlaceholder;\n      } else {\n        return imageProp;\n      }\n    }\n    //\n\n    const getDepopData = async () => {\n      console.log(\"getting depop data\")\n    \n    const depop_url = \"https://api.apify.com/v2/datasets/ml97NZifdmN1EFUSb/items?clean=true&format=json\";\n    const depopResponse = await fetch(depop_url);\n    const depopData = await depopResponse.json();\n\n    const depopDataParsed = await depopData.map(\n      (listing) => {\n        return {\n          title: isNull(listing.title),\n          price: isPriceNull(listing.price),\n          description: isNull(listing.description),\n          image: isNull(missingImagesFiltered(listing.image)),\n          url: isNull(listing.url),\n          site: \"depop\"\n        }\n      }\n    );\n\n    this.setState({\n      depopData : {\n        data: depopDataParsed,\n        status: 'resolved'\n      }\n    })\n\n    let depopDataSetTime = Date.now() - appLoaded\n\n    console.log(\"depop data has been set, it took this many milliseconds: \" + depopDataSetTime);\n\n    }\n\n///\n\n    const getGumtreeData = async () => {\n      console.log(\"getting gumtree data\")\n    \n      const gumtree_url = \"https://api.apify.com/v2/datasets/Dh5XzAb9fvidWw285/items?format=json&clean=1\"\n      const gumtreeResponse = await fetch(gumtree_url);\n      const gumtreeData = await gumtreeResponse.json();\n  \n      const gumtreeDataParsed = await gumtreeData.map(\n        listing => {\n          return {\n            title: listing.title,\n            price: listing.price.substring(1),\n            description: listing.description,\n            image: missingImagesFiltered(listing.image),\n            url: listing.url,\n            site: \"gumtree\"\n          }\n        }\n      )\n\n    this.setState({\n      gumtreeData : {\n        data: gumtreeDataParsed,\n        status: 'resolved'\n      }\n    })\n    let gumtreeDataSetTime = Date.now() - appLoaded\n\n    console.log(\"gumtree data has been set, it took this many milliseconds: \" + gumtreeDataSetTime);\n\n    }\n\n\n    ///\n\n    const getFacebookData = async () => {\n      console.log(\"getting facebook data\")\n    \n      const facebook_url = \"https://api.apify.com/v2/datasets/IitkxYE95yydtzFlk/items?clean=true&format=json\"\n      const facebookResponse = await fetch(facebook_url);\n      const facebookData = await facebookResponse.json();\n  \n      const facebookDataParsed = facebookData.map(\n        listing => {\n          return {\n            title: \"\" + isNull(listing.title),\n            price: \"\" + facebookPriceParsed(listing.price),\n            description: \"\" + isNull(listing.description),\n            image: \"\" + missingImagesFiltered(listing.image),\n            url: \"\" + isNull(listing.url),\n            site: \"facebook\"\n          }\n        }\n      )\n  \n  \n\n    this.setState({\n      facebookData : {\n        data: facebookDataParsed,\n        status: 'resolved'\n      }\n    })\n\n    let facebookDataSetTime = Date.now() - appLoaded\n\n    console.log(\"facebook data has been set, it took this many milliseconds: \" + facebookDataSetTime);\n\n    }\n\n\n    ///////\n    getEbayAccessToken();\n    getDepopData();\n    getGumtreeData();\n    getFacebookData();\n    hotjar.initialize(2123002,6);\n    console.log(\"access token\" +  this.state.AccessToken);\n    \n  } //COMPONENT MOUNT ENDS\n\n  toggleLanding() {\n    this.setState({\n      landing: true,\n    }) \n  }\n\n   toggleDisplay(sortOrder) {\n    this.setState({ resultsDisplay: sortOrder});\n    console.log(sortOrder)\n    console.log(\"the display mode is now\" + this.state.resultsDisplay);\n    this.reOrderDisplay();\n  }\n\n  reOrderDisplay() {\n    /// functions\n\n    function shuffleArray(array) {\n      for (var i = array.length - 1; i > 0; i--) {\n          var j = Math.floor(Math.random() * (i + 1));\n          var temp = array[i];\n          array[i] = array[j];\n          array[j] = temp;\n      }\n      return array;\n  }\n\n  function lowest( a, b ) {\n    if ( Number(a.price) < Number(b.price) ){\n      return 1;\n    }\n    if ( Number(a.price) > Number(b.price) ){\n      return -1;\n    }\n    return 0;\n  }\n\n  function highest( a, b ) {\n    if ( Number(a.price) < Number(b.price) ){\n      return -1;\n    }\n    if ( Number(a.price) > Number(b.price) ){\n      return 1;\n    }\n    return 0;\n  } \n\n\n  if (this.state.Data) {\n      if (this.state.resultsDisplay === \"âš¡ï¸ Trending âš¡ï¸\") {\n        this.setState({Data: shuffleArray(this.state.Data)})\n      } else if (this.state.resultsDisplay === \"Highest price first â–²\") {\n        this.setState({Data: this.state.Data.sort(highest)})\n      } else if (this.state.resultsDisplay === \"Lowest price first â–¼\") {\n        this.setState({Data: this.state.Data.sort(lowest)}) }\n        else {\n          this.setState({})}\n        }\n  }\n\n  async setData(searchQuery) {\n    if (!searchQuery) {\n      alert(\"Tell me what to search! ðŸ˜\");\n      return;\n    }\n\n    console.time(\"complete search\")\n\n    this.setState({searchTerm: searchQuery.toLowerCase(), loading: true, landing: false});\n    \n    if (Date.now() > this.state.ExpiryDate) {\n      console.log(\"this app does not have an access token! Getting access token\")\n\n      var myHeaders = new Headers();\n      myHeaders.append(\"Authorization\", \"Basic Sm9zZXBoVW4tTG9tYS1QUkQtMTk5YWQwZDkwLWY0Y2QyYjg4OlBSRC05OWFkMGQ5MDRiYjEtZjYzMS00OGMyLTkwNTQtYTQ5Yg==\");\n      myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n      myHeaders.append(\"Cookie\", \"ebay=%5Esbf%3D%23%5E; dp1=bu1p/QEBfX0BAX19AQA**6379634c^\");\n      \n      var urlencoded = new URLSearchParams();\n      urlencoded.append(\"grant_type\", \"client_credentials\");\n      urlencoded.append(\"scope\", \"https://api.ebay.com/oauth/api_scope\");\n      \n      var requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: urlencoded,\n        redirect: 'follow'\n      };\n      \n      fetch(\"https://loma-cors.herokuapp.com/https://api.ebay.com/identity/v1/oauth2/token\", requestOptions)\n          .then(response => response.json())\n          .then(jsonresponse => {\n            this.setState({\n              AccessToken: jsonresponse.access_token,\n              ExpiryDate: new Date().getTime() + jsonresponse.expires_in * 1000\n            })\n          })\n          .catch(error => console.log('error', error));\n    } else {\n      console.log(\"this has an access token\" + this.state.AccessToken.substring(10,25));\n    }\n\n    // console.log(\"access token\" + this.state.AccessToken);\n   // let formattedExpiryDate = this.state.ExpiryDate * 1000;\n    //console.log(formattedExpiryDate.toUTCString())\n\n\n\n    /////////////////////DATA CLEANERS///////////////////////////\n    const isNull = (property) => {\n      if (property === null || property === undefined) {\n      return \" \";\n      } else {\n        return property;\n      }\n    };\n\n    const isPriceNull = (price) => {\n      if (price === undefined || price === null) {\n        return \"~\";\n      } else {\n        return price.substring(1)\n      }\n    };\n\n    const ebayPriceParsed = (listing) => {\n      if (listing.price.currency === \"USD\") {\n        return listing.price.convertedFromValue ? listing.price.convertedFromValue : listing.price.value;\n      } else {\n        return listing.price.value;\n      }\n    };\n\n    const facebookPriceParsed = (price) => {\n      let rawPrice = price.substring(1);\n      if (!price || price === \"FREE\") {\n        return \"0\"\n      } else if (price === \"See listings near me\") {\n        return \"~\"\n      } else if (!rawPrice.includes(\"Â£\")){\n        return rawPrice;\n      } else if (rawPrice.includes(\"Â£\")) {\n        return rawPrice.substring(0, rawPrice.indexOf(\"Â£\"));\n      }\n    };\n\n    const missingImagesFiltered = (imageProp) => {\n      if (imageProp === null || imageProp === undefined) {\n        return imagePlaceholder;\n      } else {\n        return imageProp;\n      }\n    }\n\n    const tnmissingImagesFiltered = (listing) => {\n      if (!listing.photos) {\n        return imagePlaceholder\n      } else {\n        return listing.photos[0].url;\n      }\n    }\n\n    const eBayMissingImagesFiltered = (listing) => {\n      if (!listing.hasOwnProperty(\"image\") || !listing.image.hasOwnProperty(\"imageUrl\")) {\n        return imagePlaceholder;\n      } else {\n        return listing.thumbnailImages[0].imageUrl;\n      }\n    }\n    /////END OF CLEANER FUNCTIONS\n    /////GET EBAY DATA\n\n    var ebayHeaders = new Headers();\n    ebayHeaders.append(\"Authorization\", `Bearer ${this.state.AccessToken}`);\n    ebayHeaders.append(\"Content-Type\", \"application/json\");\n    ebayHeaders.append(\"X-EBAY-C-MARKETPLACE-ID\", \"EBAY_US\");\n    ebayHeaders.append(\"X-EBAY-C-ENDUSERCTX\", \"affiliateCampaignId=<ePNCampaignId>,affiliateReferenceId=<referenceId>\");\n    \n    var ebayrequestOptions = {\n      method: 'GET',\n      headers: ebayHeaders,\n      redirect: 'follow'\n    };   \n\n    \n    const ebayresponse = await fetch(`https://loma-cors.herokuapp.com/https://api.ebay.com/buy/browse/v1/item_summary/search?q=${searchQuery}&limit=200&filter=conditions:{UNSPECIFIED|USED},itemLocationCountry:GB&fieldgroups=EXTENDED`, ebayrequestOptions);\n    const jsonresponse = await ebayresponse.json();\n    const ebayDataParsed = () => {\n      if (jsonresponse.itemSummaries) {\n          return jsonresponse.itemSummaries.map(\n            (listing) => {\n                return {\n                    title: isNull(listing.title),\n                    description: isNull(listing.shortDescription),\n                    price: isNull(ebayPriceParsed(listing)),\n                    image: eBayMissingImagesFiltered(listing),\n                    url: isNull(listing.itemWebUrl),\n                    site: \"ebay\"\n                }\n            }\n        )\n      } else { \n        return [];\n      }\n    }\n\n    this.setState(prevState => ({Data: [...prevState.Data,...ebayDataParsed()]}));\n\n    /////////////GET DEPOP DATA\n\n    if (this.state.depopData.status === \"unresolved\") {\n      const depop_url = \"https://api.apify.com/v2/datasets/ml97NZifdmN1EFUSb/items?clean=true&format=json\";\n      const depopResponse = await fetch(depop_url);\n      const depopData = await depopResponse.json();\n      const depopDataFiltered = depopData.filter( (listing) => {\n        if (isNull(listing.title).toLowerCase().includes(this.state.searchTerm)) {\n          return true;\n        } else if (isNull(listing.description).toLowerCase().includes(this.state.searchTerm)) {\n          return true;\n        } else {\n          return false;\n        }\n      })\n        // || isNull(listing.description).includes(this.state.searchTerm));\n      \n      const depopDataParsed = depopDataFiltered.map(\n        (listing) => {\n          return {\n            title: isNull(listing.title),\n            price: isPriceNull(listing.price),\n            description: isNull(listing.description),\n            image: isNull(missingImagesFiltered(listing.image)),\n            url: isNull(listing.url),\n            site: \"depop\"\n          }\n        }\n      )\n\n      this.setState({\n        depopData : {\n          data: depopDataParsed,\n          status: 'resolved'\n        }\n      });\n\n      this.setState(prevState => ({Data: [...prevState.Data,...depopDataParsed]}));\n\n    } else if (this.state.depopData.status === \"resolved\") {\n      const depopDataFiltered = this.state.depopData.data.filter((listing) => {\n        if (isNull(listing.title).toLowerCase().includes(this.state.searchTerm)) {\n          return true;\n        } else if (isNull(listing.description).toLowerCase().includes(this.state.searchTerm)) {\n          return true;\n        } else {\n          return false;\n        }\n      });\n      this.setState(prevState => ({Data: [...prevState.Data,...depopDataFiltered]}));\n    }\n    \n    if (this.state.gumtreeData.status === \"unresolved\") {\n      const gumtree_url = \"https://api.apify.com/v2/datasets/Dh5XzAb9fvidWw285/items?format=json&clean=1\"\n      const gumtreeResponse = await fetch(gumtree_url);\n      const gumtreeData = await gumtreeResponse.json();\n      const gumtreeDataFiltered = gumtreeData.filter( listing =>\n        listing.title.toLowerCase().includes(this.state.searchTerm) || listing.description.toLowerCase().includes(this.state.searchTerm));\n  \n      const gumtreeDataParsed = gumtreeDataFiltered.map(\n        listing => {\n          return {\n            title: listing.title,\n            price: listing.price.substring(1),\n            description: listing.description,\n            image: missingImagesFiltered(listing.image),\n            url: listing.url,\n            site: \"gumtree\"\n          }\n        }\n      )\n\n      this.setState({\n        depopData : {\n          data: gumtreeDataParsed,\n          status: 'resolved'\n        }\n      });\n\n      this.setState(prevState => ({Data: [...prevState.Data,...gumtreeDataParsed]}));\n\n    } else {\n      const gumtreeDataFiltered = this.state.gumtreeData.data.filter((listing) => {\n        if (isNull(listing.title).toLowerCase().includes(this.state.searchTerm)) {\n          return true;\n        } else if (isNull(listing.description).toLowerCase().includes(this.state.searchTerm)) {\n          return true;\n        } else {\n          return false;\n        }\n      });\n      this.setState(prevState => ({Data: [...prevState.Data,...gumtreeDataFiltered]}));\n    }\n\n    if (this.state.facebookData.status === \"unresolved\") {\n      const facebook_url = \"https://api.apify.com/v2/datasets/IitkxYE95yydtzFlk/items?clean=true&format=json\"\n      const facebookResponse = await fetch(facebook_url);\n      const facebookData = await facebookResponse.json();\n      const facebookDataFiltered = facebookData.filter( listing =>\n        listing.title.toLowerCase().includes(searchQuery || listing.description.toLowerCase().includes(searchQuery)));\n  \n      const facebookDataParsed = facebookDataFiltered.map(\n        listing => {\n          return {\n            title: \"\" + isNull(listing.title),\n            price: \"\" + facebookPriceParsed(listing.price),\n            description: \"\" + isNull(listing.description),\n            image: \"\" + missingImagesFiltered(listing.image),\n            url: \"\" + isNull(listing.url),\n            site: \"facebook\"\n          }\n        }\n      )\n\n      this.setState({\n        facebookData : {\n          data: facebookDataParsed,\n          status: 'resolved'\n        }\n      });\n      \n      this.setState(prevState => ({Data: [...prevState.Data,...facebookDataParsed]}));\n\n    } else {\n      const facebookDataFiltered = this.state.facebookData.data.filter((listing) => {\n        if (isNull(listing.title).toLowerCase().includes(this.state.searchTerm)) {\n          return true;\n        } else if (isNull(listing.description).toLowerCase().includes(this.state.searchTerm)) {\n          return true;\n        } else {\n          return false;\n        }\n      });\n      this.setState(prevState => ({Data: [...prevState.Data,...facebookDataFiltered]}));\n    }\n\n    const etsyRaw = await fetch(`https://loma-cors.herokuapp.com/https://openapi.etsy.com/v2/listings/active?keywords=${searchQuery}&tags=vintage&limit=200&region=GB&api_key=sh1n3isgj6bax7eotlor7m4s&includes=Images`);\n    const etsyJson = await etsyRaw.json();\n    const etsyDataResults = etsyJson.results;\n    const etsyData = etsyDataResults.map( listing => {\n      return {\n        title: listing.title,\n        price: listing.price,\n        description: listing.description,\n        image: missingImagesFiltered(listing.Images[0].url_570xN),\n        url: listing.url,\n        site: \"etsy\"\n      }\n    });\n\n    this.setState(prevState => ({Data: [...prevState.Data,...etsyData]}));\n\n    const trashnothingRaw = await fetch(`https://trashnothing.com/api/v1.2/posts/search?search=${searchQuery}&sort_by=relevance&types=offer&sources=trashnothing&per_page=50&page=4&device_pixel_ratio=1&latitude=51.507351&longitude=-0.127758&radius=200000&api_key=yr8sVaHEvbdkdunSFfPoDpqlwEjxIuqB3XhyFzx1`);\n    const tnJson = await trashnothingRaw.json();\n    const tnResults = tnJson.posts;\n    const trashNothingData = tnResults.map( listing => {\n      return {\n        title: listing.title,\n        price: 0,\n        description: listing.content,\n        image: tnmissingImagesFiltered(listing),\n        url: listing.url,\n        site: \"trashnothing\"\n      }\n    });\n\n    this.setState(prevState => ({Data: [...prevState.Data,...trashNothingData]}));\n\n    function highest( a, b ) {\n      if ( Number(a.price) < Number(b.price) ){\n        return 1;\n      }\n      if ( Number(a.price) > Number(b.price) ){\n        return -1;\n      }\n      return 0;\n    }\n\n    function lowest( a, b ) {\n      if ( Number(a.price) < Number(b.price) ){\n        return -1;\n      }\n      if ( Number(a.price) > Number(b.price) ){\n        return 1;\n      }\n      return 0;\n    } \n\n    function shuffleArray(array) {\n      for (var i = array.length - 1; i > 0; i--) {\n          var j = Math.floor(Math.random() * (i + 1));\n          var temp = array[i];\n          array[i] = array[j];\n          array[j] = temp;\n      }\n      return array;\n  }\n      this.state.resultsDisplay === \"âš¡ï¸ Trending âš¡ï¸\" ? this.setState(prevState => ({Data: shuffleArray(prevState.Data), loading: false}))\n     : this.state.resultsDisplay === \"Highest price first â–²\" ? this.setState(prevState => ({Data: prevState.Data.sort(highest), loading: false}))\n     : this.state.resultsDisplay === \"Lowest price first â–¼\" ? this.setState(prevState => ({Data: prevState.Data.sort(lowest), loading: false}))\n     : this.setState(prevState => ({Data: prevState.Data, loading: false}))\n\n  console.timeEnd(\"complete search\")\n  }\n\n  handleChange(searchQuery) {\n    this.setState({ searchTerm: searchQuery });\n    this.setData(searchQuery);\n\n  }\n\n  togglePopUp(listing) {\n    if (this.state.popUpListing.display === true ) {\n      this.setState({\n        popUpListing: {\n          display: false,\n          listing: {}\n        }\n      })\n    } else {\n      this.setState({\n        popUpListing: {\n          display: true,\n          listing: listing\n        }\n      })\n  }\n} \n  \n  render() {\n    return (\n      <div className=\"App w-screen h-full bg-white\">\n          {this.state.popUpListing.display ? <PopUpListing display={this.state.popUpListing.display} listing={this.state.popUpListing.listing} togglePopUp={this.togglePopUp}/> : null}\n          <SearchBar onChange={this.handleChange}/>\n          \n\n          {this.state.landing ? <Landing /> : null } \n          {this.state.loading ? null : <Results Data={this.state.Data}\n                  resultsDisplay={this.state.resultsDisplay}\n                  toggleResults={this.toggleDisplay}\n                  searchTerm={this.state.searchTerm}\n                  search={this.handleChange}\n                  togglePopUp={this.togglePopUp}\n                  />}\n         \n          {this.state.loading ? <LoadingPop /> : <p></p>}\n  \n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}